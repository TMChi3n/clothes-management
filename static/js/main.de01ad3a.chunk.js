(this["webpackJsonpclothes-management"]=this["webpackJsonpclothes-management"]||[]).push([[0],{199:function(e,t){e.exports="data:image/jpeg;base64,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"},292:function(e,t,a){e.exports=a(399)},399:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(266),o=a.n(l),c=a(84),s=a(127),d=a(131),i=a(18),u=a(200),A=a(423),m=a(424),p=a(425),y=a(182);const E=Object(y.b)({name:"user",initialState:{id_user:"",username:"",email:"",access_token:"",role:""},reducers:{setUser:(e,t)=>{const{id_user:a,username:r,email:n,access_token:l,role:o}=t.payload||{};e.id_user=a||"",e.username=r||"",e.email=n||"",e.access_token=l||"",e.role=o||""}}}),{setUser:h}=E.actions;var g=E.reducer,v=a(414),b=a(66),w=a(422);var f=a(412).a.create({baseURL:"http://localhost:8080/api/v1"});const k=async()=>{try{return(await f.get("/product/get")).data}catch(e){throw console.error("Error fetching products",e),e}},x=async e=>{try{return(await f.post("/product/create",e)).data}catch(t){throw console.error("Verify your data, please!",t),t}},O=async e=>{try{return(await f.delete("/product/delete/".concat(e))).data}catch(t){throw console.error("Error deleting product",t),t}};var P=a(168),S=a(415),j=a(413),I=a(420),C=a(267),q=a.n(C);var X=e=>{let{size:t,placeholder:a,bordered:r,style:l,...o}=e;return n.a.createElement(q.a,Object.assign({size:t,placeholder:a,bordered:r,style:l},o))};const{Option:F}=P.a;var U=e=>{let{form:t,isModalOpen:a,createMutation:r,onCancel:l}=e;return n.a.createElement(S.a,{title:"Adding product",visible:a,onCancel:l,footer:null},n.a.createElement(v.a,{form:t,onFinish:async e=>{try{const a=await(t=e.img_url[0].originFileObj,new Promise((e,a)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=e=>a(e)}));r.mutate({...e,price:parseFloat(e.price),stock_quantity:parseInt(e.stock_quantity,10),img_url:a})}catch(a){console.error("Failed to create product",a)}var t},layout:"vertical"},n.a.createElement(v.a.Item,{label:"Product Name",name:"name",rules:[{required:!0,message:"Please enter the product name"}]},n.a.createElement(X,{allowClear:!0,placeholder:"Enter product name"})),n.a.createElement(v.a.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter the product price"}]},n.a.createElement(X,{allowClear:!0,placeholder:"Enter product price"})),n.a.createElement(v.a.Item,{label:"Material",name:"material",rules:[{required:!0,message:"Please enter the product material"}]},n.a.createElement(X,{allowClear:!0,placeholder:"Enter product material"})),n.a.createElement(v.a.Item,{label:"Overview",name:"overview",rules:[{required:!0,message:"Please enter the product overview"}]},n.a.createElement(X,{allowClear:!0,placeholder:"Enter product overview"})),n.a.createElement(v.a.Item,{label:"Type",name:"type",rules:[{required:!0,message:"Please choose a type"}]},n.a.createElement(P.a,{placeholder:"Choose type",allowClear:!0},n.a.createElement(F,{value:"trouser"},"Trouser"),n.a.createElement(F,{value:"jacket"},"Jacket"),n.a.createElement(F,{value:"polo shirt"},"Polo Shirt"),n.a.createElement(F,{value:"t-shirt"},"T-Shirt"),n.a.createElement(F,{value:"dress"},"Dress"))),n.a.createElement(v.a.Item,{label:"Image",name:"img_url",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,rules:[{required:!0,message:"Please provide an image"}]},n.a.createElement(j.a,{name:"img",listType:"picture",beforeUpload:()=>!1},n.a.createElement(b.a,{icon:n.a.createElement(I.a,null)},"Click to upload"))),n.a.createElement(v.a.Item,{label:"Person",name:"person",rules:[{required:!0,message:"Please choose a person"}]},n.a.createElement(P.a,{placeholder:"Choose person",allowClear:!0},n.a.createElement(F,{value:"male"},"Male"),n.a.createElement(F,{value:"female"},"Female"),n.a.createElement(F,{value:"children"},"Children"))),n.a.createElement(v.a.Item,null,n.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Add Product"))))},N=a(416),L=a(417),T=a(277);const{Option:_}=P.a;var M=e=>{let{form:t,isDrawerOpen:a,onClose:l,updateProduct:o,selectedProduct:c}=e;return Object(r.useEffect)(()=>{c&&t.setFieldsValue(c)},[c,t]),n.a.createElement(N.a,{title:"Update Product",visible:a,onClose:l,width:480},n.a.createElement(v.a,{form:t,layout:"vertical",onFinish:e=>{const t=parseInt(e.id_product,10);if(isNaN(t))return void L.a.error({message:"Invalid product ID",description:"Please enter a valid product ID."});const a={name:e.name,material:e.material,overview:e.overview,price:parseInt(e.price,10),type:e.type,person:e.person};o(t,a)}},n.a.createElement(v.a.Item,{label:"ID Product",name:"id_product"},n.a.createElement(T.a,{disabled:!0})),n.a.createElement(v.a.Item,{label:"Product Name",name:"name"},n.a.createElement(T.a,{allowClear:!0,placeholder:"Enter product name"})),n.a.createElement(v.a.Item,{label:"Price",name:"price"},n.a.createElement(T.a,{allowClear:!0,placeholder:"Enter product price"})),n.a.createElement(v.a.Item,{label:"Material",name:"material"},n.a.createElement(T.a,{allowClear:!0,placeholder:"Enter product material"})),n.a.createElement(v.a.Item,{label:"Overview",name:"overview"},n.a.createElement(T.a.TextArea,{allowClear:!0,placeholder:"Enter product overview"})),n.a.createElement(v.a.Item,{label:"Type",name:"type"},n.a.createElement(P.a,{placeholder:"Choose type",allowClear:!0},n.a.createElement(_,{value:"trouser"},"Trouser"),n.a.createElement(_,{value:"jacket"},"Jacket"),n.a.createElement(_,{value:"Polo shirt"},"Polo Shirt"),n.a.createElement(_,{value:"T-Shirt"},"T-Shirt"),n.a.createElement(_,{value:"dress"},"Dress"))),n.a.createElement(v.a.Item,{label:"Person",name:"person"},n.a.createElement(P.a,{placeholder:"Choose person",allowClear:!0},n.a.createElement(_,{value:"male"},"Male"),n.a.createElement(_,{value:"female"},"Female"),n.a.createElement(_,{value:"children"},"Children"))),n.a.createElement(b.a,{type:"primary",htmlType:"submit"},"Update Product")))};var B=e=>{let{isModalDeleteOpen:t,handleConfirmDelete:a,onCancel:l}=e;const[o,c]=Object(r.useState)(!1);return n.a.createElement(S.a,{title:"Delete product",visible:t,onCancel:l,footer:[n.a.createElement(b.a,{key:"cancel",onClick:l},"Cancel"),n.a.createElement(b.a,{key:"delete",type:"primary",danger:!0,onClick:async()=>{c(!0),await a(),c(!1)},loading:o},"Delete")],okText:"Accept",cancelText:"Cancel",confirmLoading:o},n.a.createElement("p",null,"Are you sure you want to delete this product?"))},z=a(280),K=a(411),R=a(421),D=a(282),W=a(199),V=a.n(W);var Z=e=>{let{products:t,handleEdit:a,handleDelete:r}=e;const l=[{title:"ID",dataIndex:"id_product",key:"id_product"},{title:"Name",dataIndex:"name",key:"name"},{title:"Material",dataIndex:"material",key:"material"},{title:"Overview",dataIndex:"overview",key:"overview"},{title:"Price",dataIndex:"price",key:"price"},{title:"Image",dataIndex:"img_url",key:"img_url",render:e=>{const t=(null===e||void 0===e?void 0:e.data)?String.fromCharCode(...e.data):V.a;return n.a.createElement("img",{src:t,alt:"Product",style:{width:"50px",height:"50px",objectFit:"cover"}})}},{title:"Type",dataIndex:"type",key:"type"},{title:"Person",dataIndex:"person",key:"person"},{title:"Actions",key:"actions",render:(e,t)=>n.a.createElement(z.a,null,n.a.createElement(b.a,{icon:n.a.createElement(R.a,null),onClick:()=>a(t)}),n.a.createElement(b.a,{icon:n.a.createElement(D.a,null),onClick:()=>r(t.id_product)}))}];return n.a.createElement(K.a,{dataSource:t,columns:l,rowKey:e=>e.id_product})},Q=a(418);const G=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Success";Q.a.success(e)},J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error";Q.a.error(e)};var H=()=>{const[e]=v.a.useForm(),[t,a]=Object(r.useState)(!1),[l,o]=Object(r.useState)(!1),[c,d]=Object(r.useState)(!1),[i,u]=Object(r.useState)(null),{data:A,isLoading:m}=Object(s.useQuery)("product",k),p=new s.QueryClient,y=Object(s.useMutation)(x,{onSuccess:()=>{p.invalidateQueries("product"),a(!1),G("Product created successfully!")},onError:()=>{J("Failed to create product")}}),E=Object(s.useMutation)(O,{onSuccess:()=>{p.invalidateQueries("product"),d(!1),G("Product deleted successfully!")},onError:e=>{console.error("Error deleting product",e),J("Failed to delete product")}});return n.a.createElement("div",null,n.a.createElement("h3",null,"Product Management"),n.a.createElement(b.a,{type:"primary",icon:n.a.createElement(w.a,null),onClick:()=>{e&&e.resetFields(),a(!0)},style:{marginBottom:16}},"Add Product"),m?n.a.createElement("div",null,"Loading..."):n.a.createElement(Z,{products:A||[],handleEdit:t=>{e.setFieldsValue(t),u(t),o(!0)},handleDelete:async e=>{try{await E.mutateAsync(e)}catch(t){console.error("Failed to delete product",t),J("Failed to delete product")}}}),n.a.createElement(U,{form:e,isModalOpen:t,createMutation:y,onCancel:()=>a(!1)}),n.a.createElement(M,{form:e,isDrawerOpen:l,updateProduct:async(e,t)=>{try{console.log("Update payload:",t),await(async(e,t)=>{try{return(await f.put("/product/update/".concat(e),t)).data}catch(a){throw console.error("Error updating product:",a),a}})(e,t),G("Product updated successfully!"),o(!1),p.invalidateQueries("product")}catch(a){console.error("Error details:",a),J("Failed to update product")}},onClose:()=>o(!1),selectedProduct:i}),n.a.createElement(B,{isModalDeleteOpen:c,handleConfirmDelete:async()=>{if(i&&i.id_product)try{await E.mutateAsync(i.id_product),d(!1),G("Product deleted successfully!")}catch(e){console.error("Failed to delete product",e),J("Failed to delete product")}else console.error("Selected product not found")},onCancel:()=>d(!1)}))},Y=a(278),$=a(419);const{Option:ee}=P.a;var te=()=>{const e=Object(c.c)(e=>e.user),[t,a]=Object(r.useState)([]),[l,o]=Object(r.useState)(!0),[s,d]=Object(r.useState)(null);Object(r.useEffect)(()=>{(async()=>{try{const e=await(async()=>{try{return(await f.get("/users")).data}catch(e){throw console.error("Error fetching users:",e),e}})();console.log("Response from API:",e),a(e||[])}catch(e){d(e)}finally{o(!1)}})()},[e]);const i=async(t,r)=>{try{await(async(e,t,a)=>{try{await f.patch("/auth/update-role/".concat(e),{role:t},{headers:{Authorization:"Bearer ".concat(a)}}),console.log("id user: ".concat(e))}catch(r){throw console.error("Error updating order status",r),r}})(t,r,e.access_token),a(e=>e.map(e=>e.id_user===t?{...e,role:r}:e)),Q.a.success("Role updated successfully")}catch(n){Q.a.error("Failed to update role")}};if(l)return n.a.createElement(Y.a,{tip:"Loading users..."});if(s)return n.a.createElement($.a,{message:"Error",description:s.message,type:"error",showIcon:!0});const u=[{title:"ID User",dataIndex:"id_user",key:"id_user"},{title:"Username",dataIndex:"username",key:"username"},{title:"Email",dataIndex:"email",key:"email"},{title:"Avatar",dataIndex:"avatar",key:"avatar",render:e=>{const t=(null===e||void 0===e?void 0:e.data)?String.fromCharCode(...e.data):V.a;return n.a.createElement("img",{src:t,alt:"User",style:{width:"50px",height:"50px",objectFit:"cover"}})}},{title:"Role",dataIndex:"role",key:"role",render:(e,t)=>n.a.createElement(P.a,{defaultValue:e,style:{width:120},onChange:e=>i(t.id_user,e)},n.a.createElement(ee,{value:"user"},"User"),n.a.createElement(ee,{value:"admin"},"Admin"))}],A=t.map((e,t)=>({key:t,id_user:e.id_user,username:e.username,email:e.email,gender:e.gender,avatar:e.avatar,birthday:e.birthday,address:e.address,phone_number:e.phone_number,role:e.role}));return n.a.createElement("div",null,n.a.createElement("h3",{style:{marginBottom:"50px",marginTop:"20px"}},"Users List"),n.a.createElement(K.a,{columns:u,dataSource:A,expandable:{expandedRowRender:e=>n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("b",null,"Phone Number:")," ",e.phone_number),n.a.createElement("p",null,n.a.createElement("b",null,"Address:")," ",e.address),n.a.createElement("p",null,n.a.createElement("b",null,"Gender:")," ",e.gender),n.a.createElement("p",null,n.a.createElement("b",null,"Birthday:")," ",e.birthday))},style:{width:"1000px",height:"100%"}}))};const{Option:ae}=P.a;var re=()=>{const e=Object(c.c)(e=>e.user),[t,a]=Object(r.useState)([]),[l,o]=Object(r.useState)(!0),[s,d]=Object(r.useState)(null);Object(r.useEffect)(()=>{(async()=>{try{const t=await(async e=>{try{return(await f.get("/order",{headers:{Authorization:"Bearer ".concat(e)}})).data}catch(t){throw console.error("Error fetching orders",t),t}})(e.access_token);t.forEach(e=>{console.log("Order ID:",e.id_order)}),a(t||[])}catch(t){d(t)}finally{o(!1)}})()},[e]);const i=async(t,r)=>{try{console.log("Updating order ".concat(t," to status ").concat(r)),await(async(e,t,a)=>{try{await f.patch("/order/".concat(e,"/status"),{status:t},{headers:{Authorization:"Bearer ".concat(a)}}),console.log("id order: ".concat(e))}catch(r){throw console.error("Error updating order status",r),r}})(t,r,e.access_token),a(e=>e.map(e=>e.id_order===t?{...e,status:r}:e)),console.log("Successfully updated order ".concat(t," to status ").concat(r))}catch(n){console.error("Error updating status",n),d(n)}};if(l)return n.a.createElement(Y.a,{tip:"Loading orders..."});if(s)return n.a.createElement($.a,{message:"Error",description:s.message,type:"error",showIcon:!0});const u=[{title:"ID order",dataIndex:"id_order",key:"id_order"},{title:"Status",dataIndex:"status",key:"status",render:(e,t)=>n.a.createElement(P.a,{value:e,onChange:e=>i(t.id_order,e)},n.a.createElement(ae,{value:"pending"},"Pending"),n.a.createElement(ae,{value:"processing"},"Processing"),n.a.createElement(ae,{value:"completed"},"Completed"),n.a.createElement(ae,{value:"cancelled"},"Cancelled"))},{title:"Order date",dataIndex:"order_date",key:"order_date"},{title:"Completed date",dataIndex:"completed_date",key:"completed_date"},{title:"Total Quantity",dataIndex:"total_quantity",key:"total_quantity"},{title:"Total Price",dataIndex:"total_price",key:"total_price"}],A=t.map(e=>{var t,a;return{key:e.id_order,id_order:e.id_order,status:e.status,order_date:e.order_date,completed_date:e.completed_date,total_quantity:(null===(t=e.orderItems)||void 0===t?void 0:t.reduce((e,t)=>e+t.quantity,0))||0,total_price:(null===(a=e.orderItems)||void 0===a?void 0:a.reduce((e,t)=>e+t.price,0))||0,orderItems:e.orderItems||[]}});return n.a.createElement("div",null,n.a.createElement("h3",{style:{marginBottom:"50px",marginTop:"20px"}},"Orders List"),n.a.createElement(K.a,{columns:u,expandable:{expandedRowRender:e=>n.a.createElement(K.a,{columns:[{title:"Product ID",dataIndex:"id_product",key:"id_product"},{title:"Quantity",dataIndex:"quantity",key:"quantity"},{title:"Price",dataIndex:"price",key:"price"},{title:"Address",dataIndex:"address",key:"address"},{title:"Phone number",dataIndex:"phone_number",key:"phone_number"}],dataSource:e.orderItems,pagination:!1,rowKey:e=>e.id_order_detail})},dataSource:A,style:{width:"1000px",height:"100%"}}))};var ne=function(){const e=Object(i.p)(),t=(Object(c.b)(),[{key:"sub1",icon:null,children:[{key:"user",icon:n.a.createElement(A.a,null),label:"Users"},{key:"product",icon:n.a.createElement(m.a,null),label:"Products"},{key:"order",icon:n.a.createElement(p.a,null),label:"Orders"}],label:"Management"}]),[a,l]=Object(r.useState)("");return n.a.createElement("div",{style:{display:"flex",height:"100vh"}},n.a.createElement(u.a,{onClick:e=>{l(e.key)},style:{width:256,height:"100vh",position:"fixed",top:60,left:0},defaultOpenKeys:["sub1"],selectedKeys:[a],mode:"inline",items:t}),n.a.createElement("div",{style:{marginLeft:"256px",padding:"15px 15px",flex:1}},n.a.createElement("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"}},n.a.createElement("h1",null,"Clothes Shop Management"),n.a.createElement("div",null,n.a.createElement("button",{onClick:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user_info"),e("/login")},style:{padding:"10px 20px",backgroundColor:"red",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"}},"Logout"))),(e=>{switch(e){case"product":return n.a.createElement(H,null);case"user":return n.a.createElement(te,null);case"order":return n.a.createElement(re,null);default:return n.a.createElement("div",null,"Select a menu item to view")}})(a)))};var le,oe,ce,se=()=>{const[e,t]=Object(r.useState)(""),[a,l]=Object(r.useState)(""),[o,c]=Object(r.useState)(""),[s,d]=Object(r.useState)(""),u=Object(i.n)(),[A,m]=Object(r.useState)(""),p=Object(i.p)();Object(r.useEffect)(()=>{const e=new URLSearchParams(u.search).get("token");m(e)},[u]);return n.a.createElement("div",null,n.a.createElement("h2",null,"Reset Password"),n.a.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),a!==o)return void d("Passwords do not match.");const r={email:e,token:A,newPassword:a,confirmPassword:o};console.log("Reset Password Data:",r);try{const e=await(async(e,t)=>{try{return(await f.post("/auth/reset-password?token=".concat(e),t)).data}catch(a){throw console.error("Error resetting password:",a),a}})(A,r);d(e.message),p("/login")}catch(n){console.error("Error resetting password:",n),d("Failed to reset password. Please try again.")}}},n.a.createElement("div",null,n.a.createElement("label",null,"Email:"),n.a.createElement("input",{type:"email",value:e,onChange:e=>t(e.target.value),required:!0})),n.a.createElement("div",null,n.a.createElement("label",null,"New Password:"),n.a.createElement("input",{type:"password",value:a,onChange:e=>l(e.target.value),required:!0})),n.a.createElement("div",null,n.a.createElement("label",null,"Confirm Password:"),n.a.createElement("input",{type:"password",value:o,onChange:e=>c(e.target.value),required:!0})),n.a.createElement("button",{type:"submit"},"Reset Password")),s&&n.a.createElement("p",null,s))},de=a(274),ie=a(210),ue=a(211);const Ae=ue.a.div(le||(le=Object(ie.a)(["\n  flex: 1;\n  padding: 40px 45px 24px;\n  display: flex;\n  flex-direction: column;\n"])));ue.a.div(oe||(oe=Object(ie.a)(["\n  width: 400px;\n  background: linear-gradient(\n    136deg,\n    rgb(240, 248, 255) -1%,\n    rgb(219, 238, 255) 85%\n  );\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n"]))),ue.a.span(ce||(ce=Object(ie.a)(["\n  color: rgb(13, 92, 182);\n  font-size: 13px;\n  cursor: pointer;\n  margin-top: 20px;\n"])));const me=[{path:"/",component:ne}],pe=[{path:"/reset-password",component:se},{path:"/login",component:()=>{const e=Object(i.p)(),t=Object(c.b)();return n.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.53)",height:"100vh"}},n.a.createElement("div",{id:"sign-in-form",style:{width:"600px",height:"400px",borderRadius:"6px",background:"#fff",display:"flex",position:"relative"}},n.a.createElement(Ae,null,n.a.createElement("h1",{style:{marginBottom:"20px",textAlign:"center"}},"Welcome!"),n.a.createElement(v.a,{onFinish:async a=>{try{const r=await(async e=>{try{const t=await f.post("/auth/login",e);return console.log("API response data:",t.data),t.data}catch(t){throw console.error("API error:",t),t}})(a);if(r&&r.access_token){G("Login success"),localStorage.setItem("access_token",r.access_token),localStorage.setItem("refresh_token",r.refresh_token);const a=Object(de.a)(r.access_token),n={...(await(async(e,t)=>{try{return(await f.get("/user/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(a){throw console.error("Error fetching user:",a),a}})(null===a||void 0===a?void 0:a.sub,r.access_token)).data,access_token:r.access_token};localStorage.setItem("user_info",JSON.stringify(n)),t(h(n)),e("/")}else console.log("Error: ",r?r.message:"No response"),J(r?r.message:"Login failed")}catch(r){console.error("Login error:",r),J("The email and/or password incorrect! Please try again")}},style:{display:"flex",flexDirection:"column",gap:"5px"}},n.a.createElement(v.a.Item,{name:"email",rules:[{required:!0,message:"Required"}]},n.a.createElement(T.a,{placeholder:"Email"})),n.a.createElement(v.a.Item,{name:"password",rules:[{required:!0,message:"Required"}]},n.a.createElement(T.a.Password,{placeholder:"Password"})),n.a.createElement(b.a,{type:"primary",htmlType:"submit",style:{backgroundColor:"red",borderColor:"red"}},"Sign In")))))}}];var ye=e=>{let{children:t}=e;return!!localStorage.getItem("access_token")?t:n.a.createElement(i.a,{to:"/login"})};var Ee=function(){const e=Object(c.b)();return n.a.useEffect(()=>{const t=JSON.parse(localStorage.getItem("user_info"));t&&e(h(t))},[e]),n.a.createElement(i.d,null,me.map((e,t)=>{const a=e.component;return n.a.createElement(i.b,{key:t,path:e.path,element:n.a.createElement(ye,null,n.a.createElement(a,null))})}),pe.map((e,t)=>{const a=e.component;return n.a.createElement(i.b,{key:t,path:e.path,element:n.a.createElement(a,null)})}),n.a.createElement(i.b,{path:"*",element:n.a.createElement(i.a,{to:"/login"})}))};var he=Object(y.a)({reducer:{user:g}});const ge=new s.QueryClient,ve=document.getElementById("root");o.a.createRoot(ve).render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(c.a,{store:he},n.a.createElement(s.QueryClientProvider,{client:ge},n.a.createElement(d.a,null,n.a.createElement(Ee,null))))))}},[[292,1,2]]]);
//# sourceMappingURL=main.de01ad3a.chunk.js.map